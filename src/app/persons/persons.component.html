<div class="d-flex justify-content-center bg-fundo">
    <div class="container cadastro">
        <div class="row align-items-center">
            <div class="col-9 title">Cadastro de clientes</div>
            <div class="col-3 box-btn-cadastrar">
                <button type="button" class="btn-cadastrar w-75" data-bs-toggle="modal" data-bs-target="#modalNewRegister">
                    Novo cadastro &nbsp;
                    <svg width="26" height="13" viewBox="0 0 26 13" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M25.7692 5.78749C25.9161 5.92812 26.0004 6.12501 26.0004 6.33128C26.0004 6.53754 25.9161 6.73131 25.7692 6.87507L20.2688 12.1254C19.9688 12.413 19.4937 12.4005 19.2093 12.1004C18.9249 11.8004 18.9343 11.3254 19.2343 11.041L23.3784 7.08133H1.12408C0.708423 7.08133 0.374023 6.74693 0.374023 6.33128C0.374023 5.91562 0.708423 5.58122 1.12408 5.58122H23.3784L19.2312 1.62469C18.9312 1.33717 18.9218 0.86526 19.2062 0.565239C19.4906 0.265218 19.9656 0.255842 20.2656 0.540237L25.766 5.79062L25.7692 5.78749Z"
                            fill="white" />
                    </svg>
                </button>
            </div>

            <div class="table-responsive-md">
                <table class="table">
                    <thead>
                        <tr>
                            <th class="col-3" scope="col">Código</th>
                            <th class="col-3" scope="col">Nome</th>
                            <th class="col-3" scope="col">E-mail</th>
                            <th class="col-2" scope="col">Cpf</th>
                            <th class="col-2" scope="col">Data de nascimento</th>


                            <th class="col-5" scope="col">

                            </th>
                            <th class="col-5" scope="col">

                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let person of people">
                            <td>{{ person . id }}</td>
                            <td>{{ person . nome }}</td>
                            <td>{{ person . email }}</td>
                            <td>{{ person . cpf }}</td>
                            <td>{{ person . dataNascimento }}</td>

                            <td class="ml-5">
                                <button (click)="selectPerson(person)" data-bs-toggle="modal"
                                    data-bs-target="#modalEditRegister">
                                    <img src="/assets/edit-light.svg" alt="Editar" />
                                </button>
                            </td>
                            <td>
                                <button (click)="currentId = person.id" data-bs-toggle="modal"
                                    data-bs-target="#modalDeleteRegister">
                                    <img src="/assets/trash-light.svg" alt="Deletar" />
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>

            </div>
        </div>

        <!-- Modal Cadastro -->
        <div class="modal fade" id="modalNewRegister" tabindex="-1" aria-labelledby="modalNewRegisterLabel"
            aria-hidden="true">
            <div class="modal-dialog  modal-lg modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalNewRegisterLabel">
                            Criar novo cadastro
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form [formGroup]="newPersonForm" (ngSubmit)="createPerson()">

                            <div class="row">
                                <div class="col-6 mb-2">
                                    <label for="inputNome" class="form-label">Nome</label>
                                    <input type="text" placeholder="Insira o nome" class="form-control"
                                        id="inputNome" formControlName="nome" />
                                    <div *ngIf="nome?.invalid && (nome?.dirty || nome?.touched)" class="text-danger">
                                        <div style="margin: 1% !important" *ngIf="nome?.errors?.['required']">
                                            Nome é obrigatório.
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6 mb-2">
                                    <label for="inputAddress" class="form-label">E-mail</label>
                                    <input type="email" class="form-control" id="inputAddress"
                                        placeholder="Insira o e-mail" formControlName="email" />
                                    <div *ngIf="email?.invalid && (email?.dirty || email?.touched)" class="text-danger">
                                        <p *ngIf="email?.errors?.['required']">
                                            E-mail é obrigatório.
                                        </p>
                                        <p *ngIf="email?.errors?.['email']">
                                            E-mail inválido.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-6 mb-2">
                                    <label for="inputPhone" class="form-label">Cpf</label>
                                    <input type="text" class="form-control" id="inputPhone"
                                        placeholder="Insira o cpf" formControlName="cpf" />
                                    <div *ngIf="cpf?.invalid && (cpf?.dirty || cpf?.touched)" class="text-danger">
                                        <div style="margin: 1%" *ngIf="cpf?.errors?.['required']">
                                            Cpf é obrigatório.
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6 mb-2">
                                    <label for="inputPhone" class="form-label">Cep</label>
                                    <input type="text" class="form-control" id="inputPhone"
                                        placeholder="Insira o cep" formControlName="cep" />
                                    <div *ngIf="cep?.invalid && (cep?.dirty || cep?.touched)" class="text-danger">
                                        <div style="margin: 1%" *ngIf="cep?.errors?.['required']">
                                            Cep é obrigatório.
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 mb-2">
                                        <label for="inputPhone" class="form-label">Logradouro</label>
                                        <input type="text" class="form-control" id="inputPhone"
                                            placeholder="Insira o logradouro" formControlName="logradouro" />
                                        <div *ngIf="logradouro?.invalid && (logradouro?.dirty || logradouro?.touched)"
                                            class="text-danger">
                                            <div style="margin: 1%" *ngIf="logradouro?.errors?.['required']">
                                                Logradouro é obrigatório.
                                            </div>
                                        </div>
                                    </div>



                                    <div class="col-6 mb-2">
                                        <label for="inputPhone" class="form-label">Número</label>
                                        <input type="text" class="form-control" id="inputPhone"
                                            placeholder="Insira o numero" formControlName="numero" />
                                        <div *ngIf="numero?.invalid && (numero?.dirty || numero?.touched)"
                                            class="text-danger">
                                            <div style="margin: 1%" *ngIf="numero?.errors?.['required']">
                                                Número é obrigatório.
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <div class="row">
                                <div class="col-6 mb-2">
                                    <label for="inputPhone" class="form-label">Bairro</label>
                                    <input type="text" class="form-control" id="inputPhone"
                                        placeholder="Insira o bairro" formControlName="bairro" />
                                    <div *ngIf="bairro?.invalid && (bairro?.dirty || bairro?.touched)"
                                        class="text-danger">
                                        <div style="margin: 1%" *ngIf="bairro?.errors?.['required']">
                                            Bairro é obrigatório.
                                        </div>
                                    </div>
                                </div>

                                <div class="col-6 mb-2">
                                    <label for="inputPhone" class="form-label">Complemento</label>
                                    <input type="text" class="form-control" id="inputPhone"
                                        placeholder="Insira o complemento" formControlName="complemento" />

                                </div>

                            </div>

                            <div class="row">
                                <div class="col-6 mb-2">
                                    <label for="inputPhone" class="form-label">cidade</label>
                                    <input type="text" class="form-control" id="inputPhone"
                                        placeholder="Insira a cidade" formControlName="cidade" />
                                    <div *ngIf="cidade?.invalid && (cidade?.dirty || cidade?.touched)"
                                        class="text-danger">
                                        <div style="margin: 1%" *ngIf="cidade?.errors?.['required']">
                                            Telefone é obrigatório.
                                        </div>
                                    </div>
                                </div>



                                <div class="col-6 mb-2">
                                    <label for="inputDataNasc" class="form-label">Data de nascimento</label>
                                    <input type="date" class="form-control" id="inputDataNasc"
                                        placeholder="Insira data de nascimento" formControlName="dataNascimento" />
                                    <div *ngIf="
                  dataNascimento?.invalid &&
                    (dataNascimento?.dirty || dataNascimento?.touched)
                  "
                                        class="text-danger">
                                        <div style="margin: 1%" *ngIf="dataNascimento?.errors?.['required']">
                                            Data de nascimento é obrigatória.
                                        </div>
                                    </div>

                                </div>

                            </div>
                            <div class="col-12">
                                <button type="submit" class="btn-modal-cadastro w-100 mb-2"
                                    [disabled]="newPersonForm.invalid">
                                    Novo cadastro
                                </button>
                                <button type="button" class="btn-modal-cancelar w-100" data-bs-dismiss="modal">
                                    Cancelar
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="modalEditRegister" tabindex="-1" aria-labelledby="modalEditRegisterLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="modalEditRegisterLabel">Editar cadastro</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <form [formGroup]="editPersonForm" (ngSubmit)="updatePerson()">
                    <div class="row">
                      <div class="col-6 mb-2">
                        <label for="inputNome" class="form-label">Nome</label>
                        <input type="text" placeholder="Insira o nome" class="form-control" id="inputNome" formControlName="nome" />
                        <div *ngIf="nome?.invalid && (nome?.dirty || nome?.touched)" class="text-danger">
                          <div style="margin: 1% !important" *ngIf="nome?.errors?.['required']">
                            Nome é obrigatório.
                          </div>
                        </div>
                      </div>
                      <div class="col-6 mb-2">
                        <label for="inputAddress" class="form-label">E-mail</label>
                        <input type="email" class="form-control" id="inputAddress" placeholder="Insira o e-mail" formControlName="email" />
                        <div *ngIf="editPersonForm.get('name')?.invalid && (editPersonForm.get('name')?.dirty || editPersonForm.get('name')?.touched)" class="text-danger">
                          <p *ngIf="editPersonForm.get('name')?.errors?.['required']">
                            E-mail é obrigatório.
                          </p>
                          <p *ngIf="email?.errors?.['email']">
                            E-mail inválido.
                          </p>
                        </div>
                      </div>
                    </div>
          
                    <div class="row">
                      <div class="col-6 mb-2">
                        <label for="inputPhone" class="form-label">Cpf</label>
                        <input type="text" class="form-control" id="inputPhone" placeholder="Insira o cpf" formControlName="cpf" />
                        <div *ngIf="editPersonForm.get('cpf')?.invalid && (editPersonForm.get('cpf')?.dirty || editPersonForm.get('cpf')?.touched)" class="text-danger">
                          <div style="margin: 1%" *ngIf="editPersonForm.get('cpf')?.errors?.['required']">
                            Cpf é obrigatório.
                          </div>
                        </div>
                      </div>
                      <div class="col-6 mb-2">
                        <label for="inputPhone" class="form-label">Cep</label>
                        <input type="text" class="form-control" id="inputPhone" placeholder="Insira o cep" formControlName="cep" />
                        <div *ngIf="editPersonForm.get('cep')?.invalid && (editPersonForm.get('cep')?.dirty || editPersonForm.get('cep')?.touched)" class="text-danger">
                          <div style="margin: 1%" *ngIf="editPersonForm.get('cep')?.errors?.['required']">
                            Cep é obrigatório.
                          </div>
                        </div>
                      </div>
                    </div>
          
                    <div class="row">
                      <div class="col-6 mb-2">
                        <label for="inputPhone" class="form-label">Logradouro</label>
                        <input type="text" class="form-control" id="inputPhone" placeholder="Insira o logradouro" formControlName="logradouro" />
                        <div *ngIf="editPersonForm.get('logradouro')?.invalid && (editPersonForm.get('logradouro')?.dirty || editPersonForm.get('logradouro')?.touched)" class="text-danger">
                          <div style="margin: 1%" *ngIf="editPersonForm.get('logradouro')?.errors?.['required']">
                            Logradouro é obrigatório.
                          </div>
                        </div>
                      </div>
                      <div class="col-6 mb-2">
                        <label for="inputPhone" class="form-label">Número</label>
                        <input type="text" class="form-control" id="inputPhone" placeholder="Insira o numero" formControlName="numero" />
                        <div *ngIf="editPersonForm.get('numero')?.invalid && (editPersonForm.get('numero')?.dirty || editPersonForm.get('numero')?.touched)" class="text-danger">
                          <div style="margin: 1%" *ngIf="editPersonForm.get('numero')?.errors?.['required']">
                            Número é obrigatório.
                          </div>
                        </div>
                      </div>
                    </div>
          
                    <div class="row">
                      <div class="col-6 mb-2">
                        <label for="inputPhone" class="form-label">Bairro</label>
                        <input type="text" class="form-control" id="inputPhone" placeholder="Insira o bairro" formControlName="bairro" />
                        <div *ngIf="editPersonForm.get('bairro')?.invalid && (editPersonForm.get('bairro')?.dirty || editPersonForm.get('bairro')?.touched)" class="text-danger">
                          <div style="margin: 1%" *ngIf="editPersonForm.get('bairro')?.errors?.['required']">
                            Bairro é obrigatório.
                          </div>
                        </div>
                      </div>
                      <div class="col-6 mb-2">
                        <label for="inputPhone" class="form-label">Complemento</label>
                        <input type="text" class="form-control" id="inputPhone" placeholder="Insira o complemento" formControlName="complemento" />
                      </div>
                    </div>
          
                    <div class="row">
                      <div class="col-6 mb-2">
                        <label for="inputPhone" class="form-label">Cidade</label>
                        <input type="text" class="form-control" id="inputPhone" placeholder="Insira a cidade" formControlName="cidade" />
                        <div *ngIf="editPersonForm.get('cidade')?.invalid && (editPersonForm.get('cidade')?.dirty || editPersonForm.get('cidade')?.touched)" class="text-danger">
                          <div style="margin: 1%" *ngIf="editPersonForm.get('cidade')?.errors?.['required']">
                            Cidade é obrigatório.
                          </div>
                        </div>
                      </div>
                      <div class="col-6 mb-2">
                        <label for="inputDataNasc" class="form-label">Data de nascimento</label>
                        <input type="date" class="form-control" id="inputDataNasc" placeholder="Insira data de nascimento" formControlName="dataNascimento" />
                        <div *ngIf="editPersonForm.get('dataNascimento')?.invalid && (editPersonForm.get('cidade')?.dirty || editPersonForm.get('cidade')?.touched)" class="text-danger">
                          <div style="margin: 1%" *ngIf="editPersonForm.get('dataNascimento')?.errors?.['required']">
                            Data de nascimento é obrigatória.
                          </div>
                        </div>
                      </div>
                    </div>
          
                    <div class="col-12">
                      <button type="submit" class="btn-modal-cadastro w-100 mb-2" [disabled]="editPersonForm.invalid">
                        Salvar
                      </button>
                      <button type="button" class="btn-modal-cancelar w-100" data-bs-dismiss="modal">
                        Cancelar
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
       
        <!-- Modal Deletar -->
        <div class="modal fade" id="modalDeleteRegister" tabindex="-1" aria-labelledby="modalNewRegisterLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalNewRegisterLabel">
                            Excluir cadastro
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p class="text-delete">
                            O cadastro será excluído definitivamente. Você tem certeza que
                            deseja continuar?
                        </p>
                    </div>
                    <div class="modal-footer d-flex justify-content-end">
                        <button class="btn-cancelar" data-bs-dismiss="modal">
                            Cancelar
                        </button>
                        <button (click)="deletePerson(currentId)" class="btn-excluir"
                            (click)="deletePerson(selectedPerson.id)" data-bs-dismiss="modal">
                            <svg width="25" height="25" viewBox="0 0 25 25" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M11.3724 5.42554H14.263C14.4349 5.42554 14.5943 5.51304 14.688 5.65991L15.1662 6.42554H10.4724L10.9505 5.65991C11.0411 5.51304 11.2036 5.42554 11.3755 5.42554H11.3724ZM16.3474 6.42554L15.538 5.13179C15.263 4.69116 14.7818 4.42554 14.2661 4.42554H11.3724C10.8568 4.42554 10.3755 4.69116 10.1005 5.13179L9.29115 6.42554H7.8224H6.81927H6.31927C6.04427 6.42554 5.81927 6.65054 5.81927 6.92554C5.81927 7.20054 6.04427 7.42554 6.31927 7.42554H6.89115L7.68802 18.5693C7.7599 19.6162 8.63177 20.4255 9.68177 20.4255H15.9568C17.0068 20.4255 17.8755 19.6162 17.9505 18.5693L18.7474 7.42554H19.3193C19.5943 7.42554 19.8193 7.20054 19.8193 6.92554C19.8193 6.65054 19.5943 6.42554 19.3193 6.42554H18.8193H17.8161H16.3474ZM17.7474 7.42554L16.9536 18.4974C16.9161 19.0193 16.4818 19.4255 15.9568 19.4255H9.68177C9.15677 19.4255 8.7224 19.0193 8.6849 18.4974L7.89427 7.42554H17.7443H17.7474Z"
                                    fill="white" />
                            </svg>
                            &nbsp; Excluir
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal cadastro Sucesso -->
        <div class="modal fade" id="modalNewRegisterSucess" tabindex="-1"
            aria-labelledby="modalNewRegisterLabelSucess" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalNewRegisterLabelSucess">
                            Cadastro criado com sucesso!
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <button type="button" class="btn-fechar" data-bs-dismiss="modal" aria-label="Close">
                            Fechar
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Editado Sucesso -->
        <div class="modal fade" id="modalNewRegisterEditS" tabindex="-1"
            aria-labelledby="modalNewRegisterLabelEdit" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalNewRegisterLabelEdit">
                            Cadastro editado com sucesso!
                        </h5>

                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <button type="button" class="btn-fechar" data-bs-dismiss="modal" aria-label="Close">
                            Fechar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
